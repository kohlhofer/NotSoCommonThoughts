---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';

export async function getStaticPaths() {
  const posts = await getCollection('blog');
  return posts.map(post => ({
    params: { slug: post.slug },
    props: { post },
  }));
}

const { post } = Astro.props;
const { Content } = await post.render();

// Get the main category from tags
const category = post.data.tags?.[0] || 'uncategorized';
const categoryName = category
  .split('-')
  .map(word => word.charAt(0).toUpperCase() + word.slice(1))
  .join(' ');
---

<Layout title="Not So Common Thoughts">
  <div class="p-8 sm:p-16">
    <article class="max-w-2xl">
      <header class="mb-8">
        <h1 class="text-4xl font-serif text-slate-900 dark:text-slate-100 mb-4">
          {post.data.title}
        </h1>
        <div class="text-sm text-slate-600 dark:text-slate-400">
          Posted on <time datetime={post.data.date.toISOString()} class="text-red-600 dark:text-red-400">
            {post.data.date.toLocaleDateString('en-US', {
              year: 'numeric',
              month: 'long',
              day: 'numeric'
            })}
          </time> in <a href={`/${category}`} class="text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 transition-colors">{categoryName}</a>.
        </div>
      </header>
      <div class="prose prose-lg dark:prose-invert prose-headings:font-serif prose-a:text-red-600 dark:prose-a:text-red-400 prose-a:no-underline hover:prose-a:underline prose-p:font-serif prose-li:font-serif prose-headings:text-slate-900 dark:prose-headings:text-slate-100 prose-p:text-slate-600 dark:prose-p:text-slate-400 prose-strong:text-slate-900 dark:prose-strong:text-slate-100 prose-code:text-slate-900 dark:prose-code:text-slate-100 prose-blockquote:text-slate-600 dark:prose-blockquote:text-slate-400 prose-ul:text-slate-600 dark:prose-ul:text-slate-400 prose-ol:text-slate-600 dark:prose-ol:text-slate-400 prose-li:text-slate-600 dark:prose-li:text-slate-400 max-w-none">
        <Content />
      </div>
    </article>
  </div>
</Layout> 