---
import { getCollection } from 'astro:content';
import Layout from '../layouts/Layout.astro';
import PostListItem from '../components/PostListItem.astro';

// Get all blog posts
const posts = await getCollection('blog');

// Get posts by category
const writingPosts = posts
  .filter(post => post.data.tags?.includes('long-form'))
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
  .slice(0, 5);

const bitsPosts = posts
  .filter(post => post.data.tags?.includes('bits'))
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
  .slice(0, 5);

const aiPosts = posts
  .filter(post => post.data.tags?.includes('ai'))
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
  .slice(0, 5);
---

<Layout title="Not So Common Thoughts">
  <div class="max-w-7xl px-4 sm:px-6 lg:px-8">
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12">
      <!-- Left Column -->
      <div>
        <!-- Writing Section -->
        <section class="mb-12 sm:mb-16">
          <div class="flex justify-between items-center mb-6">
            <h2 class="text-2xl font-serif text-slate-900 dark:text-slate-100">Writing</h2>
            <a href="/writing" class="text-sm font-normal text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 transition-colors flex items-center gap-1">
              See all
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" />
              </svg>
            </a>
          </div>
          <div class="space-y-6 sm:space-y-8">
            {writingPosts.map(post => (
              <PostListItem post={post} />
            ))}
          </div>
        </section>

        <!-- Bits Section -->
        <section class="mb-12 sm:mb-16">
          <div class="flex justify-between items-center mb-6">
            <h2 class="text-2xl font-serif text-slate-900 dark:text-slate-100">Bits</h2>
            <a href="/bits" class="text-sm font-normal text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 transition-colors flex items-center gap-1">
              See all
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" />
              </svg>
            </a>
          </div>
          <div class="space-y-6 sm:space-y-8">
            {bitsPosts.map(post => (
              <PostListItem post={post} />
            ))}
          </div>
        </section>
      </div>

      <!-- Right Column -->
      <div>
        <!-- AI Section -->
        <section class="mb-12 sm:mb-16">
          <div class="flex justify-between items-center mb-6">
            <h2 class="text-2xl font-serif text-slate-900 dark:text-slate-100">AI</h2>
            <a href="/ai" class="text-sm font-normal text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 transition-colors flex items-center gap-1">
              See all
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" />
              </svg>
            </a>
          </div>
          <div class="space-y-6 sm:space-y-8">
            {aiPosts.map(post => (
              <PostListItem post={post} />
            ))}
          </div>
        </section>
      </div>
    </div>
  </div>
</Layout>

<style>
  .bg-grid-white {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32' width='32' height='32' fill='none' stroke='rgb(255 255 255 / 0.04)'%3e%3cpath d='M0 .5H31.5V32'/%3e%3c/svg%3e");
  }
</style>
